(this["webpackJsonpimport-export"]=this["webpackJsonpimport-export"]||[]).push([[0],{20:function(e,t,a){e.exports=a(49)},25:function(e,t,a){},26:function(e,t,a){},44:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(5),c=a.n(r),l=(a(25),a(26),a(3)),s=a(4),i=a(18),u=a(15),b=a(2),m=a(19),d=a(16),f=a.n(d),p=(new(function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"executeExportService",value:function(e){console.log("executed hello world",e);var t={};return e.forEach((function(e,a){t[a]=e})),JSON.stringify(t),console.log("obj",t),f.a.post("http://localhost:8081/import-export/export",t)}}]),e}()),a(44),a(17)),h=(a(48),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).exportDatabase=function(){var e,t=new Map,n=indexedDB.open("fasp",2);n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("user1")||t.createObjectStore("user1",{keyPath:"id",autoIncrement:!0}).createIndex("emailId","emailId",{unique:!0}),t.objectStoreNames.contains("user")||t.createObjectStore("user",{keyPath:"id",autoIncrement:!0}).createIndex("emailId","emailId",{unique:!0})},n.onsuccess=function(a){var n=(e=a.target.result).transaction(["user"],"readwrite").objectStore("user"),o={name:"test",emailId:"test@gmail.com",task:"",created:(new Date).getTime()},r={name:"test1",emailId:"test1@gmail.com",task:"",created:(new Date).getTime()},c=n.add(o);c.onerror=function(e){},c.onsuccess=function(e){};var l=n.add(r);l.onerror=function(e){},l.onsuccess=function(e){};for(var s=e.transaction(e.objectStoreNames,"readwrite"),i=[],u=0;u<e.objectStoreNames.length;u++)i[u]=e.objectStoreNames[u];var b=0;i.forEach(function(a){console.log("in for each");var n=s.objectStore(a).getAll();n.onsuccess=function(o){var r;r=n.result,t.set(a,r),console.log("in set state"),this.setState({exportObjectState:t}),b+=1,console.log("exportObject1.length",b),console.log("db1.objectStoreNames.length",e.objectStoreNames.length),b===e.objectStoreNames.length&&this.testFunction()}.bind(this)}.bind(this)),console.log("Test Function Call log")}.bind(Object(b.a)(a)),n.onerror=function(e){}},a.importDatabase=function(){var e={};if(window.File&&window.FileReader&&window.FileList&&window.Blob)if(void 0==document.querySelector("input[type=file]").files[0])alert("Please select a file");else{var t,n=document.querySelector("input[type=file]").files[0],o=new FileReader;n.type.match(/text.*/)&&(o.onload=function(t){console.log(t.target.result),e=t.target.result,console.log("importObjectDataFromFile",e)}),o.readAsText(n);var r=indexedDB.open("fasp",2);r.onsuccess=function(a){for(var n=(t=a.target.result).transaction(t.objectStoreNames,"readwrite"),o=[],r=0;r<t.objectStoreNames.length;r++)o[r]=t.objectStoreNames[r];o.forEach(function(t){var a=n.objectStore(t);a.clear().onsuccess=function(n){var o=JSON.parse(e),r=new Object(o),c=new Map;Object.keys(r).forEach((function(e){c.set(e,r[e])})),console.log("FinalMap",c);var l=c.get(t);console.log("dataArray",l);for(var s=0;s<l.length;s++)a.add(l[s])}.bind(this),this.setState({message:"Data imported successfully"})}.bind(this))}.bind(Object(b.a)(a)),r.onerror=function(e){}}else alert("Your browser is too old to support HTML5 File API")},a.state={exportObjectState:{},message:""},a.exportDatabase=a.exportDatabase.bind(Object(b.a)(a)),a.testFunction=a.testFunction.bind(Object(b.a)(a)),a.importDatabase=a.importDatabase.bind(Object(b.a)(a)),a.clearDatabase=a.clearDatabase.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement("h6",null,this.state.message)),o.a.createElement("h3",null,"Export Data"),"Click here to export data ",o.a.createElement("button",{type:"button",onClick:function(){e.exportDatabase()}},"Export"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("hr",null),o.a.createElement("h3",null,"Clear Data"),"Click here to clear data ",o.a.createElement("button",{type:"button",onClick:this.clearDatabase},"Clear Database"),o.a.createElement("br",null),o.a.createElement("hr",null),o.a.createElement("h3",null,"Import Data"),"Upload a file :",o.a.createElement("input",{type:"file"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{type:"button",onClick:this.importDatabase}," Import"),o.a.createElement("hr",null))}},{key:"testFunction",value:function(){console.log("in statte",this.state.exportObjectState);var e={};this.state.exportObjectState.forEach((function(t,a){e[a]=t})),e=JSON.stringify(e),console.log("obj",e);var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+e),t.setAttribute("download","exportData.txt"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),this.setState({message:"Data exported successfully"})}},{key:"clearDatabase",value:function(){var e=this;Object(p.confirmAlert)({title:"Confirm to submit",message:"Are you sure you want to clear database?.",buttons:[{label:"Yes",onClick:function(){var t,a=indexedDB.open("fasp",2);a.onsuccess=function(e){for(var a=(t=e.target.result).transaction(t.objectStoreNames,"readwrite"),n=[],o=0;o<t.objectStoreNames.length;o++)n[o]=t.objectStoreNames[o];n.forEach(function(e){a.objectStore(e).clear().onsuccess=function(e){}.bind(this)}.bind(this)),this.setState({message:"Data cleared successfully"})}.bind(e),a.onerror=function(e){}}},{label:"No",onClick:function(){e.setState({message:"Action cancelled by user"})}}]})}}]),t}(n.Component));var g=function(){return o.a.createElement("div",{className:"LearningComponent"},o.a.createElement("br",null),o.a.createElement("center",null,o.a.createElement("h1",null,"Import and export data in indexed db"),o.a.createElement("hr",null)),o.a.createElement(h,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.48dab86d.chunk.js.map